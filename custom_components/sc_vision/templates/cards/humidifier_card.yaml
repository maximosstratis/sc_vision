humidifier_card:
  type: custom:button-card
  template:
    - popup_entity_card
  tap_action:
    action: more-info
  hold_action:
    action: more-info
  state_display: |
    [[[
      let state_translated = helpers.localize(entity);
      if (["off", "unavailable", "unknown"].includes(entity.state)) {
        return state_translated;
      }
      let humidity = entity.attributes.humidity;
      return `${state_translated} - ${humidity}%`;
    ]]]
  styles:
    grid:
      - grid-template-areas: '"i n power_icon" "i s power_icon"'
      - grid-template-columns: min-content 1fr min-content
    custom_fields:
      power_icon:
        - width: 24px
        - height: 24px
        - color: var(--black)
  custom_fields:
    power_icon:
      card:
        type: custom:button-card
        show_name: false
        show_label: false
        icon: mdi:power
        entity: "[[[return entity.entity_id]]]"
        state:
          - value: "on"
            styles:
              icon:
                - color: var(--black)
        tap_action:
          action: toggle
        styles:
          card:
            - background: none
          icon:
            - width: 100%
            - color: var(--highlight)
